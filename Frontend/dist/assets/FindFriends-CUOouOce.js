import{b as o,j as s}from"./index-BSR7YrIA.js";import{u as i}from"./useQuery-Bls-ed2C.js";import{u as q}from"./useMutation-CIE9l-8x.js";import{s as l,c as f,d as p}from"./Api-9Y_Rk4KA.js";import{W as R}from"./Wrapper-Cm4OHuQf.js";import x from"./Loader-BR6Ae3rj.js";import{U as h}from"./UserCard-B_TIlJg3.js";function U(){const[u,a]=o.useState(new Set),{data:n=[],isPending:d,isError:g}=i({queryKey:["recommendedUser"],queryFn:f}),{data:t,isPending:y,isError:E}=i({queryKey:["outgoingRequests"],queryFn:p}),{mutate:m=[]}=q({mutationFn:l,onSuccess:e=>{queryClient.invalidateQueries({queryKey:["outgoingRequests","friendRequest"]}),toast.success(e?.response?.data?.message||"Friend Request Sent")},onError:e=>{console.error("Error sending request:",e),toast.error(e?.response?.data?.message)}});function c(e){m(e)}return o.useEffect(()=>{const e=new Set;t?.outgoingRequest&&t?.outgoingRequest.length>0&&(t?.outgoingRequest.forEach(r=>{e.add(r?.recipient)}),a(e))},[t]),s.jsx(R,{pageTitle:"Suggested for you",children:s.jsx("section",{className:"d-flex flex-column gap-3",children:s.jsxs("div",{className:"",children:[d&&s.jsx(x,{}),g&&s.jsx("div",{children:"Something went wrong."}),(!n||n.length===0)&&"No Friend",s.jsx("div",{className:"d-flex flex-wrap gap-3",children:n.map(e=>{const r=u.has(e._id);return s.jsx(h,{onSendRequest:c,...e,isSent:r},e._id)})})]})})})}export{U as default};
