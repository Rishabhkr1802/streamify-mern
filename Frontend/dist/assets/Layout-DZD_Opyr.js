import{j as e,L as o,b as c,e as _,V as j,O as C}from"./index-BSR7YrIA.js";import{u as b}from"./useQuery-Bls-ed2C.js";import{G as l}from"./iconBase-D6RCgo7V.js";import{e as w,f as v}from"./Api-9Y_Rk4KA.js";const N="_wrapper_uuo3d_1",S="_headerSection_uuo3d_15",k="_mainContainer_uuo3d_23",y="_sidebarSection_uuo3d_37",$="_outlet_uuo3d_45",i={wrapper:N,headerSection:S,mainContainer:k,sidebarSection:y,outlet:$},M="_sidebar_114q8_1",R="_link_114q8_13",r={sidebar:M,link:R};function L(){return e.jsx("aside",{className:`${r.sidebar}`,children:e.jsxs("nav",{className:"d-flex flex-column gap-3",children:[e.jsx(o,{to:"/",className:`${r.link} shadow`,children:e.jsx("span",{children:"Dashboard"})}),e.jsx(o,{to:"/friends",className:`${r.link} shadow`,children:e.jsx("span",{children:"Friends"})}),e.jsx(o,{to:"/find-friends",className:`${r.link} shadow`,children:e.jsx("span",{children:"Find Friends"})})]})})}const q="_profileSection_1rb64_1",z="_popup_1rb64_11",E="_notification_1rb64_35",P="_badge_1rb64_43",F="_white_1rb64_63",I="_humburger_1rb64_71",O="_icons_1rb64_81",s={profileSection:q,popup:z,notification:E,badge:P,white:F,humburger:I,icons:O};function Z(t){return l({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2a8.445 8.445 0 0 1 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43a8.495 8.495 0 0 1 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z"},child:[]}]})(t)}function B(t){return l({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},child:[]}]})(t)}function H(t){return l({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(t)}function D(){const t=c.useRef(),h=_(),a=JSON.parse(localStorage.getItem("user")),[m,d]=c.useState(!1),{data:u=[],isPending:V,isError:G}=b({queryKey:["friendRequest"],queryFn:v});c.useEffect(()=>{const n=g=>{t.current&&!t.current.contains(g.target)&&d(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);async function p(){try{return w(),j.success("Logout successful!"),setTimeout(()=>h("/login"),1e3),localStorage.removeItem("token"),localStorage.removeItem("user"),response.data}catch(n){console.error("login error",n)}}function f(){d(n=>!n)}function x(){p()}return e.jsx(e.Fragment,{children:e.jsx("header",{className:"bg-primary",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-4 px-3",children:[e.jsx("div",{className:"logo",children:e.jsx(o,{to:"/",className:"text-decoration-none text-white shadow",children:e.jsx("h2",{children:"Streamify"})})}),e.jsxs("div",{className:`d-flex align-items-center gap-4 ${s.icons} `,ref:t,children:[e.jsx("div",{className:s.notification,children:e.jsxs(o,{to:"/notification",children:[e.jsx(Z,{className:`shadow ${s.white}`,size:24}),e.jsx("span",{className:`${s.badge} badge`,children:u.length>0&&u.length})]})}),e.jsxs("div",{className:s.profileSection,role:"button",onClick:f,children:[a?.profilePic?e.jsx("img",{src:a?.profilePic,alt:"img",className:"img-responsive rounded shadow",width:28,height:28}):e.jsx(H,{className:`shadow ${s.white}`,size:24}),m&&e.jsxs("div",{className:`${s.popup} shadow`,children:[e.jsx("div",{className:"fw-bold border-bottom text-align-start",children:a?.fullName.split(" ")[0]||"User"}),e.jsx(o,{to:"/profile",className:"dropdown-item py-1 text-decoration-none text-dark",children:"Profile"}),e.jsx("button",{className:"dropdown-item py-1 text-start text-danger",onClick:x,children:"Logout"})]})]})]}),e.jsx("div",{className:s.humburger,children:e.jsx(B,{className:`${s.white}`,size:30})})]})})})}function T(){return e.jsxs("main",{className:`${i.wrapper}`,children:[e.jsx("section",{className:i.headerSection,children:e.jsx(D,{})}),e.jsxs("section",{className:i.mainContainer,children:[e.jsx("div",{className:i.sidebarSection,children:e.jsx(L,{})}),e.jsx("div",{className:i.outlet,children:e.jsx(C,{})})]})]})}export{T as default};
